{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/client/src/View/Lobby/LobbyCreation.tsx\";\nimport React from 'react';\nimport Request from \"../../API/Request\";\nimport DropBox from \"../General/Inputs/DropBox\";\nimport Input from \"../General/Inputs/Input\";\nimport InputArea from \"../General/Inputs/InputArea\";\nimport SubmitButton from \"../General/Inputs/SubmitButton\";\nimport Header from \"../General/Header\";\nimport swal from \"sweetalert\";\n\nclass LobbyCreation extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: -1,\n      label: '',\n      description: '',\n      isPrivate: true,\n      logo: null,\n      logoPath: ''\n    };\n    this.checkIfOk = this.checkIfOk.bind(this);\n    this.createLobby = this.createLobby.bind(this);\n    this.handleLabelChange = this.handleLabelChange.bind(this);\n    this.handleDescriptionChange = this.handleDescriptionChange.bind(this);\n    this.toggleVisibility = this.toggleVisibility.bind(this);\n    this.fillLogo = this.fillLogo.bind(this);\n    this.getLogo = this.getLogo.bind(this);\n    this.handleLogoDrop = this.handleLogoDrop.bind(this);\n    this.handleLogoChange = this.handleLogoChange.bind(this);\n  }\n\n  handleLabelChange(event) {\n    this.setState({\n      label: event.target.value\n    });\n  }\n\n  handleDescriptionChange(event) {\n    this.setState({\n      description: event.target.value\n    });\n  }\n\n  toggleVisibility(event) {\n    this.setState((state, props) => {\n      return {\n        isPrivate: !state.isPrivate\n      };\n    });\n  }\n\n  fillLogo(payload) {\n    const img = document.getElementById('lobby-logo' + this.state.id);\n    const blob = new Blob([payload], {\n      type: 'image/jpg'\n    });\n    img.src = URL.createObjectURL(blob);\n  }\n\n  checkIfOk(payload) {\n    if (payload['success']) {\n      swal({\n        title: 'Bien joué !',\n        text: 'Le lobby ' + this.state.label + ' a bien été créé !',\n        buttons: [false],\n        icon: 'success',\n        timer: 5000 // @ts-ignore\n\n      }).then(() => document.location = '/lobby/' + payload['data']['id_lobby']);\n    } else {\n      swal({\n        title: 'Oups !',\n        text: 'Il y a eu un soucis lors de la création du lobby, vérifie' + 'que tu as bien rempli tous les champs.',\n        icon: 'warning'\n      });\n    }\n  }\n\n  getLogo() {\n    new Request('/lobby/get_logo/' + this.state.id, this.fillLogo, 'POST', {\n      path: this.state.logoPath\n    }, 'json', 'blob');\n  }\n\n  handleLogoDrop(event) {\n    event.preventDefault();\n    this.setState({\n      logo: event.dataTransfer.files[0]\n    }, this.getLogo);\n  }\n\n  handleLogoChange(event) {\n    // @ts-ignore\n    this.setState( // @ts-ignore\n    {\n      logo: event.target.files[0]\n    }, this.getLogo);\n  }\n\n  createLobby(event) {\n    if ('' !== this.state.label && '' !== this.state.description) {\n      let formData = new FormData();\n      formData.append('label', this.state.label);\n      formData.append('description', this.state.description);\n      formData.append('private', '' + this.state.isPrivate); // @ts-ignore\n\n      formData.append('file', this.state.logo);\n\n      if (null !== this.state.logo) {\n        // @ts-ignore\n        formData.append('file', this.state.icon);\n        new Request('/lobby/create', this.checkIfOk, 'POST', formData, // @ts-ignore\n        this.state.logo.type);\n      } else {\n        new Request('/lobby/create', this.checkIfOk, 'POST', formData, // @ts-ignore\n        'jpg');\n      }\n    } else {\n      swal({\n        title: 'Oups !',\n        text: 'Il y a eu un soucis lors de la création du lobby, vérifie' + ' que tu as bien rempli tous les champs.',\n        icon: 'warning'\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: 'container-fluid',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(Header, {\n      h1: 'Créer un lobby',\n      p: 'Ici tu peux créer ton propre lobby',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: 'row',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'row container-fluid mb-4 pb-3',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'col-lg-6 col-md-6 col-sm-12 col-xs-12',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(Input, {\n      id: 'label-input',\n      inputType: 'text',\n      placeholder: 'Titre du lobby (n\\'en mets pas un trop long)',\n      checked: false,\n      className: 'mt-5',\n      onChange: this.handleLabelChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: 'row container-fluid',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'col-lg-6 col-md-6 col-sm-6 col-xs-12',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(InputArea, {\n      id: 'description-input',\n      placeholder: 'Nouvelle description du lobby\\nRacontes-y ce que tu veux, du moment que ça reste dans le thème de ton lobby',\n      className: '',\n      textAreaClassName: '',\n      rows: 7,\n      onChange: this.handleDescriptionChange,\n      disabled: false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    })), React.createElement(DropBox, {\n      id: 'logo-upload-input',\n      className: 'col-lg-6 col-md-6 col-sm-6 col-xs-12 mt-2 mt-sm-0 pt-1 pt-sm-0',\n      labelNotDragged: 'Glisse un logo par ici !',\n      labelDragged: 'Logo déposé !',\n      accept: 'image/*',\n      backgroundClassName: 'mt-1',\n      handleFileDrop: this.handleLogoDrop,\n      handleFileChange: this.handleLogoChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: 'row container-fluid mt-3 mt-sm-2',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'pl-lg-3 pl-md-3 pl-sm-3 pl-xs-3 pt-lg-2 pt-md-1 pt-sm-3 pt-xs-4 pr-lg-2 pr-md-2 pr-sm-0 pr-xs-0',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(Input, {\n      id: 'visibility-input',\n      inputType: 'checkbox',\n      checked: this.state.isPrivate,\n      placeholder: 'LobbyPage privé',\n      className: 'user-rights-checkbox',\n      onChange: this.toggleVisibility,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: 'col-11 mt-0 mt-lg-2 mt-md-2 mt-sm-3 pt-0 pl-0 text-left lobby-write-right-label',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: 'mt-2 mt-lg-2 mt-md-1 pt-1 pt-md-1 ml-3 ml-lg-2 ml-md-2 ml-sm-3',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, \"Lobby priv\\xE9 (seules les personnes autoris\\xE9es pourront le consulter\"))), React.createElement(\"div\", {\n      className: 'row container-fluid',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'col-12',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, React.createElement(SubmitButton, {\n      text: 'Créer le lobby',\n      onClick: this.createLobby,\n      className: 'mt-5',\n      disconnectButton: 'plus',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nexport default LobbyCreation;","map":{"version":3,"sources":["/usr/src/app/client/src/View/Lobby/LobbyCreation.tsx"],"names":["React","Request","DropBox","Input","InputArea","SubmitButton","Header","swal","LobbyCreation","Component","constructor","props","state","id","label","description","isPrivate","logo","logoPath","checkIfOk","bind","createLobby","handleLabelChange","handleDescriptionChange","toggleVisibility","fillLogo","getLogo","handleLogoDrop","handleLogoChange","event","setState","target","value","payload","img","document","getElementById","blob","Blob","type","src","URL","createObjectURL","title","text","buttons","icon","timer","then","location","path","preventDefault","dataTransfer","files","formData","FormData","append","render"],"mappings":"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","sourcesContent":["import React, {ChangeEvent, ReactNode} from 'react';\nimport Request from \"../../API/Request\";\nimport DropBox from \"../General/Inputs/DropBox\";\nimport Input from \"../General/Inputs/Input\";\nimport InputArea from \"../General/Inputs/InputArea\";\nimport SubmitButton from \"../General/Inputs/SubmitButton\";\nimport Header from \"../General/Header\";\nimport swal from \"sweetalert\";\n\ninterface LobbyCreationState {\n    id: number,\n    label: string,\n    description: string,\n    isPrivate: boolean,\n    logo: File | null,\n    logoPath: string,\n}\n\nclass LobbyCreation extends React.Component<any, LobbyCreationState> {\n\n    public constructor(props: any) {\n        super(props);\n        this.state = {\n            id: -1,\n            label: '',\n            description: '',\n            isPrivate: true,\n            logo: null,\n            logoPath: '',\n        }\n        this.checkIfOk = this.checkIfOk.bind(this);\n        this.createLobby = this.createLobby.bind(this);\n        this.handleLabelChange = this.handleLabelChange.bind(this);\n        this.handleDescriptionChange = this.handleDescriptionChange.bind(this);\n        this.toggleVisibility = this.toggleVisibility.bind(this);\n        this.fillLogo = this.fillLogo.bind(this);\n        this.getLogo = this.getLogo.bind(this);\n        this.handleLogoDrop = this.handleLogoDrop.bind(this);\n        this.handleLogoChange = this.handleLogoChange.bind(this);\n    }\n\n    public handleLabelChange(event: ChangeEvent<HTMLInputElement>): void {\n        this.setState({label: event.target.value});\n    }\n\n    public handleDescriptionChange(event: ChangeEvent<HTMLTextAreaElement>): void {\n        this.setState({description: event.target.value});\n    }\n\n    public toggleVisibility(event: ChangeEvent<HTMLInputElement>): void {\n        this.setState((state, props) => {\n            return {isPrivate: !state.isPrivate};\n        });\n    }\n\n    public fillLogo(payload: Blob): void {\n        const img: any = document.getElementById('lobby-logo' + this.state.id);\n        const blob = new Blob([payload], {type: 'image/jpg'});\n        img.src = URL.createObjectURL(blob);\n    }\n\n    public checkIfOk(payload: any): void {\n        if (payload['success']) {\n            swal({\n                title: 'Bien joué !',\n                text: 'Le lobby ' + this.state.label + ' a bien été créé !',\n                buttons: [false],\n                icon: 'success',\n                timer: 5000,\n                // @ts-ignore\n            }).then(() => document.location = '/lobby/' + payload['data']['id_lobby']);\n        } else {\n            swal({\n                title: 'Oups !',\n                text: 'Il y a eu un soucis lors de la création du lobby, vérifie' +\n                    'que tu as bien rempli tous les champs.',\n                icon: 'warning',\n            })\n        }\n    }\n\n    public getLogo(): void {\n        new Request(\n            '/lobby/get_logo/' + this.state.id,\n            this.fillLogo,\n            'POST',\n            {\n                path: this.state.logoPath,\n            },\n            'json',\n            'blob',\n        );\n    }\n\n    public handleLogoDrop(event: React.DragEvent<HTMLDivElement>): void {\n        event.preventDefault();\n        this.setState(\n            {logo: event.dataTransfer.files[0]},\n            this.getLogo\n        );\n    }\n\n    public handleLogoChange(event: ChangeEvent<HTMLInputElement>): void {\n        // @ts-ignore\n        this.setState(\n            // @ts-ignore\n            {logo: event.target.files[0]},\n            this.getLogo\n        );\n    }\n\n    public createLobby(event: React.MouseEvent<HTMLButtonElement, MouseEvent>): void {\n        if ('' !== this.state.label && '' !== this.state.description) {\n            let formData = new FormData();\n            formData.append('label', this.state.label);\n            formData.append('description', this.state.description);\n            formData.append('private', '' + this.state.isPrivate);\n            // @ts-ignore\n            formData.append('file', this.state.logo);\n            if (null !== this.state.logo) {\n                // @ts-ignore\n                formData.append('file', this.state.icon);\n\n                new Request(\n                    '/lobby/create',\n                    this.checkIfOk,\n                    'POST',\n                    formData,\n                    // @ts-ignore\n                    this.state.logo.type,\n                );\n            } else {\n                new Request(\n                    '/lobby/create',\n                    this.checkIfOk,\n                    'POST',\n                    formData,\n                    // @ts-ignore\n                    'jpg',\n                );\n            }\n        } else {\n            swal({\n                title: 'Oups !',\n                text: 'Il y a eu un soucis lors de la création du lobby, vérifie' +\n                    ' que tu as bien rempli tous les champs.',\n                icon: 'warning',\n            })\n        }\n    }\n\n    public render(): ReactNode {\n        return (\n            <div className={'container-fluid'}>\n                <Header\n                    h1={'Créer un lobby'}\n                    p={'Ici tu peux créer ton propre lobby'}\n                />\n                <div className={'row'}>\n                    <div className={'row container-fluid mb-4 pb-3'}>\n                        <div className={'col-lg-6 col-md-6 col-sm-12 col-xs-12'}>\n                            <Input id={'label-input'}\n                                   inputType={'text'}\n                                   placeholder={'Titre du lobby (n\\'en mets pas un trop long)'}\n                                   checked={false}\n                                   className={'mt-5'} onChange={this.handleLabelChange}\n                            />\n                        </div>\n                    </div>\n                    <div className={'row container-fluid'}>\n                        <div className={'col-lg-6 col-md-6 col-sm-6 col-xs-12'}>\n                            <InputArea id={'description-input'}\n                                       placeholder={'Nouvelle description du lobby\\nRacontes-y ce que tu veux, du moment que ça reste dans le thème de ton lobby'}\n                                       className={''}\n                                       textAreaClassName={''}\n                                       rows={7}\n                                       onChange={this.handleDescriptionChange}\n                                       disabled={false}\n                            />\n                        </div>\n                        <DropBox\n                            id={'logo-upload-input'}\n                            className={'col-lg-6 col-md-6 col-sm-6 col-xs-12 mt-2 mt-sm-0 pt-1 pt-sm-0'}\n                            labelNotDragged={'Glisse un logo par ici !'}\n                            labelDragged={'Logo déposé !'}\n                            accept={'image/*'}\n                            backgroundClassName={'mt-1'}\n                            handleFileDrop={this.handleLogoDrop}\n                            handleFileChange={this.handleLogoChange}\n                        />\n                    </div>\n                    <div className={'row container-fluid mt-3 mt-sm-2'}>\n                            <div className={'pl-lg-3 pl-md-3 pl-sm-3 pl-xs-3 pt-lg-2 pt-md-1 pt-sm-3 pt-xs-4 pr-lg-2 pr-md-2 pr-sm-0 pr-xs-0'}>\n                                <Input\n                                    id={'visibility-input'}\n                                    inputType={'checkbox'}\n                                    checked={this.state.isPrivate}\n                                    placeholder={'LobbyPage privé'}\n                                    className={'user-rights-checkbox'}\n                                    onChange={this.toggleVisibility}\n                                />\n                            </div>\n                        <div className={'col-11 mt-0 mt-lg-2 mt-md-2 mt-sm-3 pt-0 pl-0 text-left lobby-write-right-label'}>\n                            <h4\n                                className={'mt-2 mt-lg-2 mt-md-1 pt-1 pt-md-1 ml-3 ml-lg-2 ml-md-2 ml-sm-3'}\n                            >\n                                Lobby privé (seules les personnes autorisées pourront le\n                                consulter\n                            </h4>\n                        </div>\n                    </div>\n\n                    <div className={'row container-fluid'}>\n                        <div className={'col-12'}>\n                            <SubmitButton\n                                text={'Créer le lobby'}\n                                onClick={this.createLobby}\n                                className={'mt-5'}\n                                disconnectButton={'plus'}\n                            />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default LobbyCreation;\n"]},"metadata":{},"sourceType":"module"}